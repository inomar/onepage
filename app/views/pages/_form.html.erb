<% if @page.template_id.present? %>
  <%= f.hidden_field :template_id, value: @page.template_id %>
<% end %>
<div>

</div>
<div class="ui big form">
  <div class="ui secondary pointing menu js-postMenu">
    <a class="item active" data-tab="main">本編 </a>
    <a class="item" data-tab="option">オプション </a>
    <div class="right menu">
      <span class="item">
        <% if @page.published? %>
          <span class="ui basic blue label">公開中</span>
        <% else %>
          <span class="ui basic label">非公開</span>
        <% end %>
      </span>
    </div>
  </div>
  <div class="ui right floated tiny buttons">
    <%= f.submit '下書き保存', name: 'draft', class: 'ui basic blue button' %>
    <%= f.submit '公開', class: 'ui blue button' %>
  </div>
  <div class="ui tab active" data-tab="main">
    <div class="field">
      <%= f.label :title %>
      <%= f.text_field :title, class: 'form__input', placeholder: 'タイトルを書く'%>
    </div>
    <div class="field">
      <%= f.text_area :story, class: 'form__textarea fixed--height js-pageStory', placeholder: '小説を書く...' %>
    </div>
  </div>
  <div class="ui tab" data-tab="option">
    <div class="ui two column grid">
      <div class="column">
        <div class="field">
          <%= f.label 'カテゴリー' %>
          <%= f.collection_select(:category_id, Category.all, :id, :name, class: 'ui fluid search dropdown', multiple: true, prompt: '選択してください') %>
        </div>
        <div class="field">
          <%= f.label 'タグ' %>
          <ul class="tag-it"></ul>
          <%= hidden_field_tag 'tags', @page.tag_list, { class: 'js-tagHidden' } %>
          <%# text_field_tag 'page[tag_list]', @page.tag_list.join(','), class: 'form__input', placeholder: 'タグを書く...' %>
        </div>
        <div class="field">
          <%= f.label :summary %>
          <%= f.text_area :summary %>
        </div>
      </div>
      <div class="column">
        <div class="field">
          <label for="">ブックカバー</label>
          <div class="ui tiny card">
            <div class="image js-bookCover">
              <img src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg" alt="">
            </div>
          </div>
          <div class="ui two column grid">
            <div class="column">
              <a href="#" class="ui basic button js-imageModal">ブックカバー検索</a>
              <%= f.hidden_field :cover_url, {class: 'js-coverUrl'} %>
            </div>
            <div class="column">
              <%= f.label :cover, class: 'ui button' do %>
                  画像を選択
                  <%= f.attachment_field :cover, style: 'display:none;' %>
              <% end %>
            </div>
          </div>
        </div>
      </div>

    <div class="ui modal js-modal">
      <i class="close icon"></i>
      <div class="header">
        <div class="ui search">
          <div class="ui icon input">
            <input class="prompt" type="text" placeholder="検索...">
            <i class="search icon"></i>
          </div>
        </div>
      </div>
      <div class="image scrolling content" style="min-height: 500px">
        <div class="image">
          <div class="ui small images js-responseImages"></div>
        </div>
      </div>
      <div class="actions">
        <div class="ui button">Cancel</div>
        <div class="ui button">OK</div>
      </div>
    </div>
    <%= f.label :cover, class: 'ui button' do %>
        画像を選択
        <%= f.attachment_field :cover, style: 'display:none;' %>
    <% end %>

    <%= f.submit 'プレビュー', name: 'preview', class: 'ui button', formtarget: 'blank' %>
    <%= link_to '削除',  @page, method: :delete, data: { confirm: '本当に削除してよろしいですか？' }, class: 'ui basic red button' %>
  </div>
</div>

<%= javascript_pack_tag 'page' %>
